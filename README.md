# ğŸŒ¾ Smart Gebere - Intelligent Agriculture Assistant

<div align="center">

![Smart Gebere Logo](assets/image_1.jpg)

**An AI-powered mobile application designed to revolutionize farming practices for Ethiopian farmers**

[![Flutter](https://img.shields.io/badge/Flutter-3.x-blue.svg)](https://flutter.dev/)
[![Firebase](https://img.shields.io/badge/Firebase-Enabled-orange.svg)](https://firebase.google.com/)
[![Gemini AI](https://img.shields.io/badge/Gemini%20AI-Powered-green.svg)](https://ai.google.dev/)
[![License](https://img.shields.io/badge/License-MIT-purple.svg)](LICENSE)

[Features](#-features) â€¢ [Installation](#-installation) â€¢ [Architecture](#-architecture) â€¢ [API Documentation](#-api-documentation) â€¢ [Contributing](#-contributing)

</div>

---

## ğŸ“‹ Table of Contents

1. [Overview](#-overview)
2. [Features](#-features)
3. [Technology Stack](#-technology-stack)
4. [Architecture](#-architecture)
5. [Installation & Setup](#-installation--setup)
6. [Configuration](#-configuration)
7. [Project Structure](#-project-structure)
8. [Core Modules](#-core-modules)
9. [API Documentation](#-api-documentation)
10. [Database Schema](#-database-schema)
11. [Localization](#-localization)
12. [Security](#-security)
13. [Testing](#-testing)
14. [Deployment](#-deployment)
15. [Troubleshooting](#-troubleshooting)
16. [Roadmap](#-roadmap)
17. [Contributing](#-contributing)
18. [License](#-license)

---

## ğŸŒ Overview

**Smart Gebere** (áˆµáˆ›áˆ­á‰µ áŒˆá‰ áˆ¬ - "Smart Farmer" in Amharic) is a comprehensive agricultural assistant application built with Flutter. It leverages artificial intelligence, GPS technology, and real-time weather data to provide Ethiopian farmers with personalized crop recommendations, disease detection, yield predictions, and farm management tools.

### Mission Statement

> To empower Ethiopian farmers with cutting-edge technology, enabling data-driven decisions that increase crop yields, reduce losses, and promote sustainable farming practices.

### Key Objectives

- ğŸ¯ **Personalized Recommendations**: AI-powered crop suggestions based on location, climate, and soil conditions
- ğŸ”¬ **Disease Detection**: Image-based plant disease diagnosis using computer vision
- ğŸ“… **Smart Planning**: Week-by-week farming guides tailored to specific crops and fields
- ğŸ“Š **Yield Prediction**: AI-powered harvest forecasting and market value estimation
- ğŸ—ºï¸ **Field Mapping**: GPS-based land measurement and management
- ğŸŒ **Multi-language Support**: Available in English, Amharic (áŠ áˆ›áˆ­áŠ›), and Afaan Oromo

---

## âœ¨ Features

### ğŸ  Home Dashboard

The central hub of the application featuring:

| Component | Description |
|-----------|-------------|
| **Weather Widget** | Real-time weather data for the farmer's location |
| **Quick Actions** | One-tap access to key features |
| **Created Tasks** | Slideshow of active crop plans with progress |
| **Expected Events** | Upcoming farming tasks and deadlines |
| **Navigation Drawer** | Access to all app features |

### ğŸŒ± AI Crop Recommendations

```
Location Data â†’ Weather API â†’ Elevation API â†’ Gemini AI â†’ Personalized Crop List
```

**How it works:**
1. Fetches current GPS coordinates
2. Retrieves elevation data from Open-Elevation API
3. Gets real-time weather from OpenWeather API
4. Optionally includes user's mapped field data (size, soil type)
5. Sends comprehensive data to Gemini AI
6. Returns ranked crop suggestions with suitability scores

**Output includes:**
- Crop name and description
- Suitability percentage (0-100%)
- Climate suitability analysis
- Soil requirements
- Water needs assessment
- Elevation factor analysis
- Seasonal growth patterns

### ğŸ©º AI Crop Doctor

An intelligent chat assistant for farming questions and plant diagnosis.

**Capabilities:**
- Real-time chat with Gemini AI
- Photo-based plant disease diagnosis
- Pest control advice (organic methods prioritized)
- Irrigation and fertilization guidance
- Crop-specific question answering
- Multi-language responses

**Technical Implementation:**
```dart
// Image-based diagnosis
Content.multi([
  TextPart(prompt),
  DataPart('image/jpeg', imageBytes),
])

// Text-based chat
ChatSession.sendMessage(Content.text(userQuery))
```

### ğŸ”¬ Disease Detection

Advanced image analysis for plant disease identification.

**Features:**
- Camera and gallery image input
- Real-time disease detection
- Confidence score display
- Treatment recommendations
- Detection history
- Share results functionality

**AI Prompt Structure:**
```
Analyze this plant image and provide:
1. Plant identification
2. Disease/problem detection
3. Severity assessment
4. Treatment recommendations
5. Prevention tips
```

### ğŸ“… Crop Planning & Scheduling

Week-by-week farming guides generated by AI.

**Data Structure:**
```json
{
  "week": 1,
  "date_range": ["2025-01-01", "2025-01-07"],
  "stage": "Land Preparation",
  "tasks": [
    "Test soil pH and adjust as necessary",
    "Plow the field to a depth of 15 cm",
    "Add organic compost"
  ],
  "completedTasks": [0, 2]
}
```

**Stages Covered:**
1. ğŸ—ï¸ Land Preparation
2. ğŸŒ± Planting/Sowing
3. ğŸ“ˆ Growth & Maintenance
4. ğŸŒ¸ Flowering
5. ğŸŒ¾ Harvest

### ğŸ“Š Yield Prediction & Analytics

AI-powered harvest forecasting system.

**Inputs:**
- Selected crop
- Land size (hectares/acres/timad)
- Seed amount
- Fertilizer used
- Field data (if mapped)

**Outputs:**
```json
{
  "estimated_yield_min": 1500,
  "estimated_yield_max": 2500,
  "yield_per_hectare": 2000,
  "confidence_percentage": 85,
  "market_value_estimate_min": 45000,
  "market_value_estimate_max": 75000,
  "harvest_quality_prediction": "good",
  "optimal_harvest_timing": "When 90% of grains are golden",
  "factors_affecting_yield": [...],
  "recommendations": [...]
}
```

### ğŸ—ºï¸ GPS Field Mapping

Precise land measurement using GPS coordinates.

**Features:**
- Real-time GPS tracking
- Walk-the-boundary mapping
- Automatic area calculation (Shoelace formula)
- Multiple soil type options
- Save and manage multiple fields
- Integration with crop recommendations

**Area Calculation:**
```dart
// Shoelace formula for polygon area
double _calculatePolygonArea(List<LatLng> points) {
  double area = 0;
  for (int i = 0; i < n; i++) {
    int j = (i + 1) % n;
    area += x1 * y2 - x2 * y1;
  }
  return (area.abs() / 2) / 10000; // hectares
}
```

**Supported Soil Types:**
- Loam
- Clay
- Sandy
- Silt
- Vertisol (Black Cotton)
- Nitosol (Red)
- Andosol

### ğŸ“ˆ Market Prices

Real-time agricultural commodity prices.

**Features:**
- Price trends visualization
- Historical data charts
- Regional price comparison
- Price alerts (planned)

### ğŸŒ¤ï¸ Weather Advisor

Comprehensive weather information for farming decisions.

**Data Provided:**
- Current temperature
- Humidity levels
- Weather conditions
- 7-day forecast
- Farming recommendations based on weather

### ğŸ“š Knowledge Base

Educational content for farmers.

**Categories:**
- Crop guides
- Pest management
- Soil health
- Water management
- Post-harvest handling
- Market information

### ğŸ“ Farm Records

Digital record-keeping for farm activities.

**Record Types:**
- Planting records
- Harvest records
- Input purchases
- Sales records
- Expense tracking

### ğŸ‘¤ Farmer Profile

User profile and farm information management.

**Profile Data:**
- Personal information
- Farm location
- Land holdings
- Crop history
- Preferences

---

## ğŸ› ï¸ Technology Stack

### Frontend

| Technology | Purpose | Version |
|------------|---------|---------|
| **Flutter** | Cross-platform UI framework | 3.x |
| **Dart** | Programming language | 3.x |
| **Provider** | State management | 6.x |
| **Google Fonts** | Typography | 6.x |
| **FL Chart** | Data visualization | 0.69.x |

### Backend & Services

| Service | Purpose |
|---------|---------|
| **Firebase Auth** | User authentication |
| **Cloud Firestore** | NoSQL database |
| **Google Gemini AI** | AI/ML capabilities |
| **OpenWeather API** | Weather data |
| **Open-Elevation API** | Elevation data |

### Core Packages

```yaml
dependencies:
  # Firebase
  firebase_core: ^3.12.1
  firebase_auth: ^5.5.1
  cloud_firestore: ^5.6.5

  # AI & ML
  google_generative_ai: ^0.4.6

  # Location
  geolocator: ^13.0.2

  # Media
  image_picker: ^1.1.2

  # UI
  google_fonts: ^6.2.1
  fl_chart: ^0.69.2
  awesome_dialog: ^3.2.1

  # Storage
  shared_preferences: ^2.x
  hive: ^2.x
  hive_flutter: ^1.x

  # Utilities
  http: ^1.3.0
  intl: ^0.19.0
  flutter_dotenv: ^5.2.1
  provider: ^6.1.2
  uuid: ^4.5.1
```

---

## ğŸ—ï¸ Architecture

### Application Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRESENTATION LAYER                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Pages  â”‚ â”‚ Widgets â”‚ â”‚ Dialogs â”‚ â”‚  Cards  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       BUSINESS LAYER                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Services  â”‚ â”‚  Providers â”‚ â”‚   Models   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚              â”‚              â”‚
         â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATA LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Firebase  â”‚ â”‚ Gemini AI â”‚ â”‚  Weather  â”‚ â”‚   Local   â”‚   â”‚
â”‚  â”‚ Firestore â”‚ â”‚    API    â”‚ â”‚    API    â”‚ â”‚  Storage  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow

```
User Action
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Widget    â”‚ â—„â”€â”€â”€ State Management (Provider/setState)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service   â”‚ â—„â”€â”€â”€ Business Logic
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  External   â”‚ â—„â”€â”€â”€ Firebase / APIs / AI
â”‚   Service   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   Response
       â”‚
       â–¼
   UI Update
```

### State Management

The app uses a combination of:

1. **Provider** - For app-wide state (settings, user info)
2. **StatefulWidget** - For local component state
3. **FutureBuilder/StreamBuilder** - For async data

```dart
// Global state example
class AppSettings extends ChangeNotifier {
  Locale _locale = const Locale('en');
  
  Locale get locale => _locale;
  
  Future<void> setLocale(Locale newLocale) async {
    _locale = newLocale;
    await _persistLocale(newLocale);
    notifyListeners();
  }
}
```

---

## ğŸš€ Installation & Setup

### Prerequisites

- Flutter SDK 3.x or higher
- Dart SDK 3.x or higher
- Android Studio / VS Code
- Firebase CLI
- Git

### Step 1: Clone Repository

```bash
git clone https://github.com/your-org/smart-gebere.git
cd smart-gebere/Smart_Gebere
```

### Step 2: Install Dependencies

```bash
flutter pub get
```

### Step 3: Firebase Setup

1. Create a Firebase project at [Firebase Console](https://console.firebase.google.com/)
2. Enable Authentication (Email/Password)
3. Enable Cloud Firestore
4. Download configuration files:
   - `google-services.json` â†’ `android/app/`
   - `GoogleService-Info.plist` â†’ `ios/Runner/`

### Step 4: Environment Configuration

Create `.env` file in project root:

```env
# API Keys
API_KEY=your_gemini_api_key
GEMINI_API_KEY=your_gemini_api_key
OPENWEATHER_API_KEY=your_openweather_api_key

# Model Configuration
GEMINI_MODEL=gemini-1.5-flash
```

### Step 5: Run Application

```bash
# Development
flutter run

# Web
flutter run -d chrome

# Android
flutter run -d android

# iOS
flutter run -d ios

# Build APK
flutter build apk --release

# Build iOS
flutter build ios --release
```

---

## âš™ï¸ Configuration

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `API_KEY` | Gemini AI API key | âœ… |
| `GEMINI_API_KEY` | Alternative Gemini key | âœ… |
| `OPENWEATHER_API_KEY` | Weather API key | âœ… |
| `GEMINI_MODEL` | AI model name | âŒ (default: gemini-1.5-flash) |

### Firebase Configuration

**Firestore Security Rules:**

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users collection
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Farmers collection
    match /Farmers/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Public content
    match /content/{document=**} {
      allow read: if request.auth != null;
      allow write: if false;
    }
  }
}
```

---

## ğŸ“ Project Structure

```
Smart_Gebere/
â”œâ”€â”€ android/                    # Android-specific code
â”œâ”€â”€ ios/                        # iOS-specific code
â”œâ”€â”€ web/                        # Web-specific code
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart              # Application entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                  # Authentication
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ login.dart     # Login page
â”‚   â”‚   â””â”€â”€ signup/
â”‚   â”‚       â””â”€â”€ sign_up.dart   # Registration page
â”‚   â”‚
â”‚   â”œâ”€â”€ Home/                  # Home module
â”‚   â”‚   â”œâ”€â”€ Home.dart          # Main dashboard
â”‚   â”‚   â”œâ”€â”€ task_creation.dart # Task creation cards
â”‚   â”‚   â”œâ”€â”€ created_task.dart  # Active crops display
â”‚   â”‚   â”œâ”€â”€ expected_event.dart # Upcoming tasks
â”‚   â”‚   â”œâ”€â”€ cropdetailpage.dart # Crop details
â”‚   â”‚   â””â”€â”€ weeklydetailpage.dart # Weekly details
â”‚   â”‚
â”‚   â”œâ”€â”€ Disease_page/          # Disease detection
â”‚   â”‚   â””â”€â”€ DiseaseDetection.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ geo_Location/          # Location services
â”‚   â”‚   â””â”€â”€ location.dart      # GPS & weather
â”‚   â”‚
â”‚   â”œâ”€â”€ scheduling/            # Crop planning
â”‚   â”‚   â””â”€â”€ schedule.dart      # Week-by-week planner
â”‚   â”‚
â”‚   â”œâ”€â”€ task_management/       # Task management
â”‚   â”‚   â”œâ”€â”€ descrition.dart    # Agriculture intro page
â”‚   â”‚   â””â”€â”€ list_suggestion.dart # Crop suggestions
â”‚   â”‚
â”‚   â”œâ”€â”€ features/              # Feature modules
â”‚   â”‚   â”œâ”€â”€ ai_doctor/
â”‚   â”‚   â”‚   â””â”€â”€ ai_crop_doctor_page.dart
â”‚   â”‚   â”œâ”€â”€ yield_prediction/
â”‚   â”‚   â”‚   â””â”€â”€ yield_prediction_page.dart
â”‚   â”‚   â”œâ”€â”€ field_mapping/
â”‚   â”‚   â”‚   â””â”€â”€ field_mapping_page.dart
â”‚   â”‚   â”œâ”€â”€ market_prices/
â”‚   â”‚   â”‚   â””â”€â”€ market_prices_page.dart
â”‚   â”‚   â”œâ”€â”€ weather_advisor/
â”‚   â”‚   â”‚   â””â”€â”€ weather_advisor_page.dart
â”‚   â”‚   â”œâ”€â”€ farm_records/
â”‚   â”‚   â”‚   â””â”€â”€ farm_records_page.dart
â”‚   â”‚   â”œâ”€â”€ farm_profile/
â”‚   â”‚   â”‚   â””â”€â”€ farm_profile_page.dart
â”‚   â”‚   â”œâ”€â”€ knowledge_base/
â”‚   â”‚   â”‚   â””â”€â”€ knowledge_base_page.dart
â”‚   â”‚   â””â”€â”€ privacy/
â”‚   â”‚       â””â”€â”€ privacy_page.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                  # Core services
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ connectivity_service.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ connectivity_io.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ connectivity_web.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ connectivity_stub.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ offline_storage.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ ai_reliability.dart
â”‚   â”‚   â”‚   â””â”€â”€ content_service.dart
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚       â”œâ”€â”€ farm_profile.dart
â”‚   â”‚       â”œâ”€â”€ farm_record.dart
â”‚   â”‚       â”œâ”€â”€ market_price.dart
â”‚   â”‚       â”œâ”€â”€ knowledge_article.dart
â”‚   â”‚       â””â”€â”€ detection_history.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ settings/              # App settings
â”‚   â”‚   â”œâ”€â”€ app_settings.dart
â”‚   â”‚   â”œâ”€â”€ settings_page.dart
â”‚   â”‚   â”œâ”€â”€ locale_store.dart
â”‚   â”‚   â”œâ”€â”€ locale_store_io.dart
â”‚   â”‚   â”œâ”€â”€ locale_store_web.dart
â”‚   â”‚   â””â”€â”€ locale_store_stub.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ l10n/                  # Localization
â”‚   â”‚   â”œâ”€â”€ app_localizations.dart
â”‚   â”‚   â”œâ”€â”€ fallback_localizations.dart
â”‚   â”‚   â”œâ”€â”€ app_en.arb
â”‚   â”‚   â”œâ”€â”€ app_am.arb
â”‚   â”‚   â””â”€â”€ app_om.arb
â”‚   â”‚
â”‚   â”œâ”€â”€ stream/                # Auth state
â”‚   â”‚   â””â”€â”€ stream_provider.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ splash/                # Splash screen
â”‚   â”‚   â””â”€â”€ splash_screen.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ onboarding/            # Onboarding
â”‚   â”‚   â””â”€â”€ onboarding_page.dart
â”‚   â”‚
â”‚   â””â”€â”€ Loading/               # Loading states
â”‚       â””â”€â”€ loading.dart
â”‚
â”œâ”€â”€ assets/                    # Static assets
â”‚   â”œâ”€â”€ image_1.jpg
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .env                       # Environment variables
â”œâ”€â”€ pubspec.yaml              # Dependencies
â”œâ”€â”€ firestore.rules           # Firestore rules
â”œâ”€â”€ firebase.json             # Firebase config
â””â”€â”€ README.md                 # This file
```

---

## ğŸ§© Core Modules

### 1. Authentication Module

**Location:** `lib/auth/`

Handles user authentication using Firebase Auth.

```dart
// Login
await FirebaseAuth.instance.signInWithEmailAndPassword(
  email: email,
  password: password,
);

// Signup
await FirebaseAuth.instance.createUserWithEmailAndPassword(
  email: email,
  password: password,
);

// Logout
await FirebaseAuth.instance.signOut();
```

**Features:**
- Email/password authentication
- Password visibility toggle
- Form validation
- Error handling with user-friendly messages
- Animated transitions

### 2. Location Service

**Location:** `lib/geo_Location/location.dart`

Provides GPS coordinates, elevation, and weather data.

```dart
class LocationService {
  // Get current location with all data
  Future<Map<String, dynamic>> getCurrentLocation();
  
  // Get elevation for coordinates
  Future<double> getElevation(double lat, double lon);
  
  // Get weather data
  Future<Map<String, dynamic>> getWeather(double lat, double lon);
  
  // Generate AI crop suggestions
  Future<List<Map<String, dynamic>>> generateCropSuggestions(
    Map<String, dynamic> locationData, {
    Map<String, dynamic>? fieldData,
  });
}
```

### 3. AI Integration

**Multiple AI-powered features using Gemini:**

```dart
// Initialize model
final model = GenerativeModel(
  model: 'gemini-1.5-flash',
  apiKey: apiKey,
  safetySettings: [...],
  systemInstruction: Content.text('...'),
);

// Text generation
final response = await model.generateContent([Content.text(prompt)]);

// Image analysis
final response = await model.generateContent([
  Content.multi([
    TextPart(prompt),
    DataPart('image/jpeg', imageBytes),
  ])
]);

// Chat session
final chatSession = model.startChat();
final response = await chatSession.sendMessage(Content.text(message));
```

### 4. Offline Storage

**Location:** `lib/core/services/offline_storage.dart`

Local data persistence using Hive.

```dart
class OfflineStorage {
  Future<void> init();
  Future<void> saveCrops(List<Map<String, dynamic>> crops);
  Future<List<Map<String, dynamic>>> getCrops();
  Future<void> savePendingSync(Map<String, dynamic> data);
  Future<List<Map<String, dynamic>>> getPendingSync();
}
```

### 5. Connectivity Service

**Location:** `lib/core/services/connectivity_service.dart`

Cross-platform network status monitoring.

```dart
abstract class ConnectivityService {
  Stream<bool> get onConnectivityChanged;
  Future<bool> isConnected();
}

// Platform-specific implementations
// - connectivity_io.dart (Mobile/Desktop)
// - connectivity_web.dart (Web)
```

---

## ğŸ“¡ API Documentation

### External APIs

#### 1. Gemini AI API

**Endpoint:** `https://generativelanguage.googleapis.com/v1beta/`

**Authentication:** API Key

**Models Used:**
- `gemini-1.5-flash` (primary)
- `gemini-2.5-flash` (preferred, with fallback)

**Usage Examples:**

```dart
// Crop recommendations
String prompt = """
Based on the following location data, provide crop recommendations:
- Latitude: ${lat}
- Longitude: ${lon}
- Elevation: ${elevation}m
- Temperature: ${temp}Â°C
...
""";

// Disease detection
String prompt = """
Analyze this plant image and provide:
1. Plant identification
2. Disease detection
3. Treatment recommendations
...
""";
```

#### 2. OpenWeather API

**Endpoint:** `https://api.openweathermap.org/data/2.5/weather`

**Parameters:**
- `lat` - Latitude
- `lon` - Longitude
- `appid` - API key
- `units` - metric

**Response:**
```json
{
  "main": {
    "temp": 25.5,
    "humidity": 65
  },
  "weather": [{
    "description": "scattered clouds"
  }]
}
```

#### 3. Open-Elevation API

**Endpoint:** `https://api.open-elevation.com/api/v1/lookup`

**Request:**
```json
{
  "locations": [
    {"latitude": 9.0, "longitude": 38.75}
  ]
}
```

**Response:**
```json
{
  "results": [{
    "elevation": 2355
  }]
}
```

---

## ğŸ—„ï¸ Database Schema

### Firestore Collections

#### `Farmers/{userId}`

```typescript
interface Farmer {
  // Profile
  name?: string;
  phone?: string;
  region?: string;
  
  // Fields (mapped GPS fields)
  fields?: Field[];
  
  // Crops (active crop plans)
  crops?: Crop[];
}

interface Field {
  id: string;
  name: string;
  soilType: string;
  areaHectares: number;
  points: {lat: number, lng: number}[];
  createdAt: string;
}

interface Crop {
  id: string;
  name: string;
  weeks: Week[];
  progressPercentage: number;
  daysSinceFirstPlanting: number;
  createdAt: string;
  fieldId?: string;
  fieldName?: string;
  fieldAreaHectares?: number;
  soilType?: string;
}

interface Week {
  week: number;
  date_range: [string, string];
  stage: string;
  tasks: string[];
  completedTasks?: number[];
}
```

#### `users/{userId}`

```typescript
interface User {
  email: string;
  createdAt: Timestamp;
  lastLogin: Timestamp;
  settings?: UserSettings;
}

interface UserSettings {
  language: string;
  notifications: boolean;
}
```

---

## ğŸŒ Localization

### Supported Languages

| Language | Code | Status |
|----------|------|--------|
| English | `en` | âœ… Complete |
| Amharic (áŠ áˆ›áˆ­áŠ›) | `am` | âœ… Complete |
| Afaan Oromo | `om` | âœ… Complete |

### Implementation

**Location:** `lib/l10n/`

**Usage:**
```dart
final l10n = AppLocalizations.of(context);
Text(l10n.welcomeMessage);
Text(l10n.createTask);
```

**Adding New Strings:**

1. Add to `app_en.arb`:
```json
{
  "newString": "English text"
}
```

2. Add to `app_am.arb`:
```json
{
  "newString": "á‹¨áŠ áˆ›áˆ­áŠ› áŒ½áˆ‘á"
}
```

3. Add to `app_om.arb`:
```json
{
  "newString": "Afaan Oromo text"
}
```

4. Add to `AppLocalizations` class:
```dart
String get newString => _localizedValues[locale.languageCode]?['newString'] ?? 'Default';
```

### Changing Language

```dart
// In SettingsPage
await settings.setLocale(Locale('am')); // Switch to Amharic
```

---

## ğŸ”’ Security

### Authentication

- Firebase Authentication with email/password
- Secure token management
- Session persistence

### Data Protection

- Firestore security rules enforce user-level access
- No cross-user data access
- API keys stored in `.env` (not committed)

### Best Practices

1. **API Keys:** Never commit `.env` files
2. **User Data:** Encrypt sensitive local storage
3. **Network:** All API calls over HTTPS
4. **Validation:** Server-side validation in Firestore rules

### Security Rules

```javascript
// Only authenticated users can access their own data
match /Farmers/{userId} {
  allow read, write: if request.auth != null 
                     && request.auth.uid == userId;
}
```

---

## ğŸ§ª Testing

### Unit Tests

```bash
flutter test
```

### Integration Tests

```bash
flutter test integration_test/
```

### Widget Tests

```dart
testWidgets('Login button works', (tester) async {
  await tester.pumpWidget(MyApp());
  await tester.tap(find.text('Login'));
  await tester.pump();
  expect(find.text('Welcome'), findsOneWidget);
});
```

---

## ğŸ“¦ Deployment

### Android

```bash
# Generate release APK
flutter build apk --release

# Generate App Bundle
flutter build appbundle --release
```

**Output:** `build/app/outputs/flutter-apk/app-release.apk`

### iOS

```bash
flutter build ios --release
```

Then archive and upload via Xcode.

### Web

```bash
flutter build web --release
```

**Output:** `build/web/`

Deploy to Firebase Hosting:
```bash
firebase deploy --only hosting
```

---

## ğŸ”§ Troubleshooting

### Common Issues

#### 1. AssetManifest.json Error (Web)

```
Error: Unable to load asset: "AssetManifest.json"
```

**Solution:**
```bash
flutter clean
flutter pub get
flutter run -d chrome
```

#### 2. Firestore Permission Denied

```
Error: PERMISSION_DENIED
```

**Solution:**
1. Deploy Firestore rules: `firebase deploy --only firestore:rules`
2. Verify user is authenticated
3. Check collection path matches rules

#### 3. Gemini API Model Not Found

```
Error: model is not found
```

**Solution:**
- Update `GEMINI_MODEL` in `.env` to `gemini-1.5-flash`
- The app has automatic fallback to this model

#### 4. Location Permission Denied

**Solution:**
- Android: Check `AndroidManifest.xml` permissions
- iOS: Check `Info.plist` usage descriptions
- Request permission in app before accessing location

#### 5. MissingPluginException on Web

```
MissingPluginException: No implementation found
```

**Solution:**
- For `shared_preferences`: App uses cross-platform `LocaleStore`
- For `connectivity_plus`: App uses platform-specific implementations
- Ensure `flutter pub get` and full restart

---

## ğŸ—ºï¸ Roadmap

### Phase 1: Core Features âœ…

- [x] User authentication
- [x] GPS-based crop recommendations
- [x] Disease detection
- [x] Crop planning/scheduling
- [x] Multi-language support

### Phase 2: Advanced Features âœ…

- [x] AI Crop Doctor chat
- [x] Yield prediction
- [x] GPS field mapping
- [x] Task completion tracking
- [x] Progress calculation

### Phase 3: Enhancement (In Progress)

- [ ] Push notifications
- [ ] Offline-first mode
- [ ] Voice input for chat
- [ ] Community forums
- [ ] Expert consultation

### Phase 4: Future

- [ ] IoT sensor integration
- [ ] Drone imagery support
- [ ] Marketplace integration
- [ ] Government scheme information
- [ ] Insurance integration

---

## ğŸ¤ Contributing

### Getting Started

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Commit changes: `git commit -m 'Add amazing feature'`
4. Push to branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

### Code Style

- Follow [Dart style guide](https://dart.dev/guides/language/effective-dart/style)
- Use meaningful variable names
- Add comments for complex logic
- Write tests for new features

### Commit Messages

```
feat: add yield prediction feature
fix: resolve login error on iOS
docs: update API documentation
style: format code with dartfmt
refactor: simplify location service
test: add unit tests for auth
```

---

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ‘¥ Team

**Smart Gebere Development Team**

- Project Lead
- Flutter Developers
- UI/UX Designers
- AI/ML Engineers
- QA Engineers

---

## ğŸ“ Support

For support, please:

1. Check the [Troubleshooting](#-troubleshooting) section
2. Search existing [Issues](https://github.com/your-org/smart-gebere/issues)
3. Create a new issue with:
   - Device/platform information
   - Steps to reproduce
   - Expected vs actual behavior
   - Screenshots if applicable

---

## ğŸ™ Acknowledgments

- [Flutter Team](https://flutter.dev/) for the amazing framework
- [Firebase](https://firebase.google.com/) for backend services
- [Google AI](https://ai.google.dev/) for Gemini AI capabilities
- [OpenWeather](https://openweathermap.org/) for weather data
- Ethiopian farming community for domain expertise

---

<div align="center">

**Made with â¤ï¸ for Ethiopian Farmers**

ğŸŒ¾ Smart Gebere - áˆµáˆ›áˆ­á‰µ áŒˆá‰ áˆ¬ ğŸŒ¾

</div>
